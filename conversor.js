const fs = require('fs');

function ordenarPorMelhorPrecoPorMinuto(dadosStr) {
  // Dividir a string em linhas
  const linhas = dadosStr.split('\n');

  // Inicializar uma matriz para armazenar os dados formatados
  const dados = [];

  // Processar cada linha da string
  linhas.forEach(function (linha) {
    const partes = linha.split('\t');
    if (partes.length === 4) {
      const id = parseInt(partes[0]);
      const precoStr = partes[1];
      const tempoStr = partes[3];

      // Verificar se o preço contém vírgula
      if (!precoStr.includes(',')) {
        // Extrair o preço e o tempo como números
        const preco = parseFloat(precoStr.replace('$', '').trim());
        const tempo = parseFloat(tempoStr.trim());

        // Calcular o preço por minuto
        const valorPorMinuto = preco / tempo;

        // Adicionar os dados formatados à matriz com o ID
        dados.push([id, preco, tempo, valorPorMinuto]);
      }
    }
  });

  // Ordenar os dados com base no valor por minuto em ordem crescente
  dados.sort(function (a, b) {
    return a[3].toString().localeCompare(b[3].toString());
  });

  // Gere o HTML com os dados ordenados
  const html = gerarHTML(dados);

  // Salvar o HTML em um arquivo chamado "melhores.html"
  fs.writeFileSync('melhores.html', html);

  console.log('Arquivo "melhores.html" gerado com sucesso.');
}

function gerarHTML(dados) {
  // Crie uma string HTML com base nos dados ordenados
  let html = `
    <html>
      <head>
        <title>Dados Ordenados</title>
      </head>
      <body>
        <h1>Dados Ordenados por Melhor Preço por Minuto</h1>
        <table>
          <tr>
            <th>ID</th>
            <th>Preço</th>
            <th>Tempo</th>
            <th>Valor por Minuto</th>
          </tr>`;

  dados.forEach(function (entrada) {
    // Crie um link com o ID no lugar dos zeros na URL
    const link = `https://openloot.com/items/BT0/Hourglass_Common/issue/${entrada[0]}`;

    html += `
          <tr>
            <td><a href="${link}" target="_blank">${entrada[0]}</a></td>
            <td>${entrada[1]}</td>
            <td>${entrada[2]}</td>
            <td>${entrada[3]}</td>
          </tr>`;
  });

  html += `
        </table>
      </body>
    </html>`;

  return html;
}

const dadosStr = `






285258	$ 14	Link	0.09
238953	$ 8	Link	0.30
104171	$ 7.79	Link	0.56
238241	$ 11	Link	0.61
130267	$ 18	Link	0.62
282102	$ 62	Link	0.69
430688	$ 9	Link	0.79
380585	$ 20	Link	0.91
542311	$ 11	Link	0.97
462094	$ 15	Link	0.99
54038	$ 7.60	Link	1.00
162133	$ 11.10	Link	1.00
398985	$ 7.99	Link	1.08
561944	$ 15.50	Link	1.65
28784	$ 19.70	Link	1.96
543416	$ 13	Link	1.99
310084	$ 14	Link	1.99
100161	$ 16.50	Link	2.42
164281	$ 11	Link	2.47
363059	$ 11	Link	2.60
191148	$ 10	Link	2.74
598160	$ 29	Link	2.81
221583	$ 10	Link	3.42
45840	$ 9.58	Link	3.49
34319	$ 16.50	Link	4.28
103501	$ 15	Link	4.79
138940	$ 22	Link	4.96
225400	$ 22	Link	4.96
426803	$ 7.79	Link	5.00
20674	$ 30	Link	5.41
112577	$ 25	Link	5.70
10760	$ 32	Link	5.97
355438	$ 15.30	Link	6.84
367942	$ 19.87	Link	6.96
205897	$ 11	Link	7.50
300696	$ 9.99	Link	8.40
37565	$ 16	Link	8.83
251670	$ 10	Link	9.71
92280	$ 9.99	Link	9.84
402570	$ 11	Link	9.89
289040	$ 11	Link	10
287542	$ 12	Link	10
310526	$ 14.50	Link	10
107275	$ 15	Link	10
447429	$ 15	Link	10
342554	$ 16	Link	10
153365	$ 20	Link	10
455613	$ 20	Link	10
231190	$ 25	Link	10
312877	$ 30	Link	10
444306	$ 53	Link	10
449625	$ 53	Link	10
269144	$ 66	Link	10
188068	$ 10,700	Link	10
593590	$ 7.97	Link	10.98
86062	$ 60	Link	11.30
399760	$ 14	Link	11.81
579896	$ 9.49	Link	13.00
244368	$ 65	Link	15.98
491112	$ 21.30	Link	16.98
570142	$ 25	Link	18.08
245261	$ 53	Link	20
108122	$ 9.50	Link	22.99
477041	$ 14	Link	23.86
524239	$ 9.45	Link	24.00
469351	$ 10.53	Link	24.00
444374	$ 10.88	Link	24.84
562836	$ 20	Link	26.75
587810	$ 10	Link	27.09
462091	$ 19.99	Link	29.00
472701	$ 10	Link	29.56
461333	$ 30	Link	29.77
356233	$ 8	Link	30
313878	$ 10	Link	30
174945	$ 10	Link	30
410944	$ 10	Link	30
226086	$ 10	Link	30
55851	$ 10	Link	30
515048	$ 12	Link	30
256648	$ 14	Link	30
10819	$ 15	Link	30
223181	$ 15	Link	30
333922	$ 15	Link	30
364052	$ 15	Link	30
23920	$ 16	Link	30
583409	$ 16	Link	30
52305	$ 19.99	Link	30
187686	$ 20	Link	30
305173	$ 21	Link	30
296007	$ 52.70	Link	30
128122	$ 52.70	Link	30
412389	$ 65	Link	31.53
123409	$ 13	Link	32.99
214367	$ 12	Link	36.00
552213	$ 12	Link	36.97
160759	$ 11	Link	37.80
529084	$ 10,800	Link	38.47
93847	$ 10	Link	40
103685	$ 25	Link	40
498183	$ 45	Link	40
323010	$ 45	Link	40
497311	$ 26	Link	43.51
167063	$ 53	Link	45.00
180306	$ 12	Link	49.29
356012	$ 11	Link	50.63
97244	$ 15	Link	50.89
203534	$ 13.99	Link	50.99
498258	$ 13.90	Link	51.00
105763	$ 12	Link	56.42
534314	$ 12	Link	57.56
312673	$ 20	Link	58.99
572741	$ 15	Link	59.00
357461	$ 10	Link	60
370004	$ 12	Link	60
364228	$ 14	Link	60
372978	$ 18	Link	60
20146	$ 21	Link	60
30126	$ 22	Link	60
165545	$ 25	Link	60
11727	$ 49	Link	60
410305	$ 52.70	Link	60
440878	$ 52.70	Link	60
355880	$ 53	Link	60
503565	$ 60	Link	60
250560	$ 80	Link	60
250560	$ 80	Link	60
525169	$ 16.50	Link	62.07
395275	$ 18	Link	64.66
476200	$ 15	Link	65.74
486905	$ 15.80	Link	75.59
154739	$ 20	Link	79.06
93696	$ 30	Link	82.00
48298	$ 15	Link	85.87
587312	$ 12.99	Link	90
174590	$ 14	Link	90
313226	$ 30	Link	91.00
370778	$ 20	Link	91.72
440050	$ 36	Link	95.12
580301	$ 58	Link	95.86
41274	$ 20	Link	96.58
428186	$ 15	Link	97.10
155420	$ 24	Link	97.89
477770	$ 17	Link	97.99
438159	$ 20	Link	98.00
198175	$ 14	Link	99.00
425081	$ 70	Link	102.00
143726	$ 18	Link	102.99
504910	$ 18	Link	103.99
465209	$ 20	Link	106.72
452631	$ 20	Link	107.69
286957	$ 18	Link	109.00
181892	$ 77	Link	109.91
510879	$ 18	Link	111.00
287623	$ 22	Link	111.00
267072	$ 14.95	Link	112.00
557425	$ 14.95	Link	113.00
519043	$ 30	Link	114.00
1797	$ 15	Link	120
569927	$ 16.99	Link	120
49838	$ 17	Link	120
548164	$ 17	Link	120
570129	$ 17.22	Link	120
233348	$ 18	Link	120
275773	$ 19	Link	120
543748	$ 19	Link	120
451055	$ 19.55	Link	120
110587	$ 19.55	Link	120
382621	$ 19.55	Link	120
251192	$ 19.55	Link	120
8634	$ 19.55	Link	120
398462	$ 19.90	Link	120
396977	$ 19.90	Link	120
538866	$ 19.90	Link	120
560201	$ 20	Link	120
597293	$ 20	Link	120
424099	$ 21	Link	120
427031	$ 21	Link	120
541704	$ 21	Link	120
99978	$ 21.10	Link	120
70252	$ 22	Link	120
572109	$ 24.60	Link	120
505431	$ 24.90	Link	120
351825	$ 25	Link	120
501652	$ 25	Link	120
76317	$ 25	Link	120
408988	$ 26.40	Link	120
164145	$ 26.40	Link	120
363666	$ 28	Link	120
449207	$ 28	Link	120
362493	$ 28	Link	120
424290	$ 29.60	Link	120
92344	$ 30	Link	120
87946	$ 30	Link	120
173143	$ 30	Link	120
518608	$ 30	Link	120
168073	$ 30	Link	120
101521	$ 30	Link	120
507544	$ 30	Link	120
172910	$ 30	Link	120
383291	$ 30	Link	120
439900	$ 30	Link	120
192967	$ 33	Link	120
343594	$ 33	Link	120
240451	$ 35	Link	120
30615	$ 36.41	Link	120
69896	$ 36.99	Link	120
110177	$ 38	Link	120
590636	$ 40	Link	120
115052	$ 50	Link	120
270630	$ 75	Link	120
441830	$ 100	Link	120
14913	$ 102	Link	120
518535	$ 108	Link	120
518535	$ 108	Link	120
64350	$ 17.88	Link	120.24
440129	$ 25	Link	120.99
259064	$ 32	Link	121.32
238319	$ 40	Link	123.89
198485	$ 32	Link	124.03
26960	$ 21	Link	129.00
217865	$ 24.99	Link	130
35409	$ 15	Link	135.00
99788	$ 19	Link	139.51
60981	$ 19.99	Link	140.32
533731	$ 28	Link	143.85
486339	$ 15.99	Link	146.00
78884	$ 17	Link	148.42
570972	$ 16.30	Link	150
168028	$ 25	Link	150
63525	$ 30	Link	150
163018	$ 30	Link	150
423278	$ 42.11	Link	150
77	$ 77	Link	150
356194	$ 78	Link	153.87
346592	$ 16.46	Link	155.58
502049	$ 30	Link	159.87
322232	$ 18	Link	168.41
50783	$ 30	Link	176.67
559561	$ 18	Link	180
540474	$ 19.80	Link	180
462505	$ 25	Link	180
18558	$ 25	Link	180
222051	$ 36.99	Link	180
375224	$ 14.99	Link	184.71
95658	$ 14.99	Link	186.86
147921	$ 21	Link	195.00
338534	$ 18.95	Link	198.00
564995	$ 30	Link	203.00
530543	$ 20	Link	205.75
594713	$ 22	Link	208.98
314527	$ 17	Link	209.99
214538	$ 24	Link	210
235336	$ 36.99	Link	210
397086	$ 23	Link	210.98
498909	$ 25	Link	211.47
544599	$ 36	Link	212.29
66146	$ 21	Link	217.97
416235	$ 18.99	Link	218.97
252996	$ 24	Link	219.00
481955	$ 20	Link	220.96
264456	$ 25	Link	225.81
352369	$ 27	Link	227.95
141821	$ 20	Link	236.74
527439	$ 99	Link	237.00
224377	$ 45	Link	239.66
577284	$ 16.99	Link	240
545442	$ 19.49	Link	240
456111	$ 25	Link	240
3007	$ 22	Link	244.06
9360	$ 20	Link	244.93
435476	$ 30	Link	245.29
251850	$ 34	Link	246.84
327333	$ 50	Link	256.11
275970	$ 19.99	Link	256.94
91912	$ 50	Link	257.11
491896	$ 50	Link	258.11
496108	$ 30	Link	258.36
222594	$ 30	Link	258.75
357653	$ 21	Link	258.97
22148	$ 20	Link	261.97
322910	$ 50	Link	266.11
582135	$ 30	Link	268.35
211563	$ 24	Link	272.84
356355	$ 18	Link	275.60
153148	$ 20	Link	277.21
135886	$ 19.99	Link	278.95
54039	$ 19	Link	279.60
84944	$ 18	Link	280.60
459730	$ 29	Link	282.62
598603	$ 19	Link	283.85
16838	$ 45	Link	300
47879	$ 500	Link	300
555535	$ 30	Link	310.40
474495	$ 21	Link	312.44
142547	$ 20	Link	314.05
124964	$ 21	Link	314.15
326407	$ 24.80	Link	319.55
444707	$ 30	Link	320.00
364035	$ 35	Link	330.68
381853	$ 35	Link	330.98
290810	$ 21	Link	335.05
216073	$ 24	Link	336.06
267670	$ 20	Link	336.44
400456	$ 21	Link	338.65
261518	$ 31	Link	339.59
419100	$ 20	Link	340.44
321513	$ 26	Link	344.86
595731	$ 30	Link	346.90
384514	$ 35	Link	351.81
208573	$ 26	Link	352.87
313323	$ 35	Link	356.30
289796	$ 31	Link	357.14
92000	$ 35	Link	358.30
587394	$ 24.80	Link	359.52
210247	$ 22	Link	365.19
275911	$ 25	Link	365.91
72066	$ 40	Link	366.58
406294	$ 35	Link	366.91
398107	$ 30	Link	373.95
130979	$ 29	Link	375.40
170760	$ 50	Link	377.11
436873	$ 22	Link	377.19
596205	$ 26	Link	377.93
525167	$ 30	Link	381.91
407053	$ 22	Link	387.92
407805	$ 80	Link	389.24
108707	$ 80	Link	392.17
325023	$ 26	Link	393.15
358735	$ 30	Link	393.20
236116	$ 11,111	Link	393.65
437860	$ 25	Link	393.81
251089	$ 26	Link	394.15
475991	$ 30	Link	397.06
528853	$ 25	Link	404.95
203978	$ 35	Link	411.26
232330	$ 25	Link	412.35
88037	$ 25	Link	422.18
237258	$ 111	Link	425.66
553797	$ 32	Link	427.39
13965	$ 25.66	Link	433.29
181702	$ 72	Link	434.36
1153	$ 28	Link	437.96
104165	$ 40	Link	441.88
513960	$ 50	Link	442.23
182233	$ 27	Link	444.41
534900	$ 43	Link	448.07
88961	$ 26	Link	454.22
300905	$ 25	Link	460.53
274470	$ 30	Link	461.77
26522	$ 35	Link	466.17
81450	$ 30	Link	469.05
443013	$ 25	Link	478.19
550742	$ 35	Link	479.87
590402	$ 25	Link	480
570782	$ 30	Link	480
48940	$ 30	Link	489.49
574319	$ 30	Link	501.95
300438	$ 31.90	Link	507.85
470796	$ 31	Link	510.95
226739	$ 80	Link	517.63
136758	$ 80	Link	517.63
573747	$ 30	Link	519.96
459258	$ 32	Link	521.90
521528	$ 80	Link	542.24
98871	$ 42.85	Link	548.97
501472	$ 33	Link	572.50
282491	$ 40	Link	578.50
330810	$ 43	Link	578.50
389373	$ 45	Link	580.50
110954	$ 31	Link	580.95
66195	$ 31	Link	581.95
127827	$ 44	Link	582.51
580917	$ 78	Link	583.10
57023	$ 32	Link	588.96
414232	$ 35	Link	598.78
287559	$ 60	Link	598.81
429543	$ 45	Link	617.97
395771	$ 40	Link	623.98
460506	$ 35	Link	632.99
345389	$ 35	Link	634.99
114451	$ 35	Link	634.99
312062	$ 35	Link	635.99
74577	$ 35	Link	636.99
405063	$ 45	Link	638.06
378419	$ 44	Link	642.46
491685	$ 30	Link	643.82
357693	$ 40	Link	656.94
276830	$ 34	Link	666.01
104376	$ 35	Link	670.46
359433	$ 60	Link	676.20
410684	$ 32	Link	678.68
408870	$ 40	Link	681.95
505426	$ 40	Link	694.95
262737	$ 44	Link	696.00
528120	$ 40	Link	698.00
565727	$ 44	Link	709.56
380652	$ 80	Link	713.54
530830	$ 35	Link	720
354331	$ 40	Link	720
451322	$ 40	Link	720
242089	$ 40	Link	720
467176	$ 41.50	Link	720
233102	$ 41.50	Link	720
509303	$ 41.50	Link	720
485853	$ 41.50	Link	720
52513	$ 41.50	Link	720
114749	$ 41.50	Link	720
378600	$ 44	Link	720
289808	$ 44	Link	720
401089	$ 44	Link	720
371381	$ 44	Link	720
307497	$ 44	Link	720
265706	$ 44	Link	720
555807	$ 45	Link	720
263445	$ 45	Link	720
77695	$ 45	Link	720
54829	$ 45	Link	720
62531	$ 50	Link	720
328128	$ 50	Link	720
58462	$ 54.95	Link	720
255652	$ 55	Link	720
57761	$ 59.77	Link	720
239098	$ 60	Link	720
181157	$ 60	Link	720
427826	$ 60	Link	720
214325	$ 60	Link	720
220541	$ 60	Link	720
473512	$ 60	Link	720
12098	$ 65	Link	720
329668	$ 65	Link	720
110292	$ 65.77	Link	720
130198	$ 65.88	Link	720
239641	$ 65.99	Link	720
545063	$ 67.50	Link	720
149718	$ 100	Link	720
120583	$ 100	Link	720
435868	$ 100	Link	720
429943	$ 100	Link	720
91885	$ 100	Link	720
3187	$ 130	Link	720
572448	$ 66	Link	722.97
176151	$ 40	Link	724.44
487716	$ 44.77	Link	730
568203	$ 67	Link	730
44257	$ 100	Link	730
532904	$ 60	Link	734.67
119645	$ 44	Link	737.57
548457	$ 35	Link	746.96
47641	$ 40	Link	750
46924	$ 68	Link	750
80244	$ 44	Link	758.25
596393	$ 44	Link	765.75
317905	$ 35.49	Link	796.69
415586	$ 37	Link	801.46
123867	$ 40	Link	812.47
86298	$ 49.02	Link	815.98
411797	$ 51.06	Link	815.98
88941	$ 46	Link	829.96
463754	$ 36.50	Link	831.85
30635	$ 52	Link	837.45
12668	$ 71.99	Link	840
362955	$ 44	Link	847.77
189942	$ 60	Link	857.00
103004	$ 48	Link	883.08
470708	$ 49	Link	894.60
69699	$ 45	Link	900
434297	$ 45	Link	900
502283	$ 45	Link	900
271038	$ 46	Link	900
488833	$ 75	Link	900
27467	$ 75	Link	900
346941	$ 75	Link	900
334518	$ 80	Link	920
60434	$ 70	Link	955.05
149308	$ 46.11	Link	961.51
451951	$ 85	Link	964.91
258123	$ 80	Link	1000.00
39862	$ 74	Link	1020
83010	$ 100	Link	1020
493155	$ 40	Link	1050
573452	$ 45	Link	1063.76
406591	$ 88.88	Link	1066.23
209174	$ 50.99	Link	1079.85
569467	$ 52	Link	1080.32
418909	$ 44.50	Link	1089.74
152820	$ 120	Link	1098.99
62284	$ 55	Link	1122.82
407350	$ 75	Link	1186.72
488670	$ 75	Link	1186.74
456355	$ 94.90	Link	1187.72
558651	$ 55	Link	1237.45
246680	$ 54.90	Link	1252.65
25347	$ 150	Link	1260
552675	$ 50	Link	1261.65
86344	$ 66	Link	1311.17
11709	$ 70	Link	1312.93
182313	$ 110	Link	1320
326702	$ 49	Link	1341.25
111559	$ 56.88	Link	1401.99
544936	$ 58.88	Link	1405.75
513031	$ 60	Link	1423.11
510969	$ 69	Link	1500.19
187937	$ 58.88	Link	1521.26
476307	$ 65	Link	1532.18
103900	$ 118	Link	1556.95
77424	$ 70	Link	1557.46
152354	$ 75	Link	1566.95
249205	$ 79	Link	1675.34
151953	$ 66	Link	1698.05
457127	$ 80	Link	1700.80
531182	$ 130	Link	1715.03
418677	$ 52.50	Link	1745.67
77120	$ 67	Link	1752.26
432588	$ 82	Link	1845.50
364101	$ 64	Link	1891.59
410277	$ 67	Link	1905.88
402151	$ 90	Link	1924.61
331129	$ 100	Link	1979.58
431452	$ 110	Link	2029.51
104575	$ 141	Link	2029.88
26559	$ 110	Link	2031.51
84466	$ 110	Link	2031.51
506954	$ 75	Link	2040
420846	$ 69	Link	2057.57
475649	$ 101	Link	2081.97
493869	$ 110	Link	2108.50
45415	$ 149	Link	2142.12
547587	$ 85	Link	2144.03
230877	$ 88	Link	2153.27
182911	$ 160	Link	2169.92
274878	$ 120	Link	2171.33
4582	$ 75	Link	2189.89
408736	$ 73	Link	2214.06
117069	$ 70	Link	2237.06
304187	$ 70	Link	2241.06
473371	$ 100	Link	2280.58
12957	$ 100	Link	2291.16
37253	$ 100	Link	2293.16
578	$ 100	Link	2293.16
223474	$ 73	Link	2327.28
144328	$ 73	Link	2328.28
127007	$ 72	Link	2328.55
548072	$ 73	Link	2330.55
296187	$ 90	Link	2337.05
429320	$ 72	Link	2371.57
411619	$ 70	Link	2382.36
162851	$ 72	Link	2424.35
489625	$ 100	Link	2609.92
34370	$ 120	Link	2611.61
118792	$ 100	Link	2617.92
597976	$ 100	Link	2636.93
66923	$ 83	Link	2645.95
447645	$ 77	Link	2655.91
103523	$ 90	Link	2656.56
273535	$ 77	Link	2666.82
468667	$ 85	Link	2668.24
482041	$ 100	Link	2669.92
340114	$ 100	Link	2692.94
125280	$ 89.99	Link	2794.56
578560	$ 110	Link	2803.98
332313	$ 110	Link	2803.98
513465	$ 100	Link	2822.99
232647	$ 100	Link	2856.84
512221	$ 79.83	Link	2880
591471	$ 81	Link	2880
504879	$ 82	Link	2880
360146	$ 82.90	Link	2880
308918	$ 83	Link	2880
323876	$ 84.93	Link	2880
164501	$ 85	Link	2880
527676	$ 87	Link	2880
573529	$ 88	Link	2880
230832	$ 88	Link	2880
326588	$ 88.30	Link	2880
179993	$ 89	Link	2880
140590	$ 89.50	Link	2880
279312	$ 90	Link	2880
520104	$ 90	Link	2880
571814	$ 93	Link	2880
414885	$ 93	Link	2880
101245	$ 95	Link	2880
292511	$ 97.40	Link	2880
292511	$ 97.40	Link	2880
206408	$ 99	Link	2880
553692	$ 100	Link	2880
290948	$ 105	Link	2880
265327	$ 140	Link	2880
244253	$ 150	Link	2880
45204	$ 150	Link	2880
417313	$ 2,000	Link	2880
468381	$ 88	Link	2910
597728	$ 260	Link	2970
115054	$ 120	Link	2987.37
21021	$ 119.88	Link	3045.61
404241	$ 130	Link	3415.96
376030	$ 97.40	Link	3600
317582	$ 98	Link	3600
546871	$ 98	Link	3600
465591	$ 98.90	Link	3600
185832	$ 99	Link	3600
540308	$ 99	Link	3600
532005	$ 99.70	Link	3600
269508	$ 120	Link	3600
178751	$ 158	Link	3600
298638	$ 179.98	Link	3600
410718	$ 129	Link	4320
474041	$ 115	Link	4371.67
75551	$ 135	Link	4375.00
549746	$ 140	Link	5026.23
56577	$ 133	Link	5270.86
340019	$ 200	Link	5487.70
451769	$ 200	Link	5491.70
306891	$ 150	Link	5534.57
408886	$ 205	Link	5655.05
223442	$ 150	Link	5760
476772	$ 186	Link	7200
214157	$ 248	Link	7920
177659	$ 1,000	Link	7920





`;

// Chama a função de ordenação e geração do arquivo HTML
ordenarPorMelhorPrecoPorMinuto(dadosStr);
