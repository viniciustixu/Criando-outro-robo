const fs = require('fs');

function ordenarPorMelhorPrecoPorMinuto(dadosStr) {
  // Dividir a string em linhas
  const linhas = dadosStr.split('\n');

  // Inicializar uma matriz para armazenar os dados formatados
  const dados = [];

  // Processar cada linha da string
  linhas.forEach(function (linha) {
    const partes = linha.split('\t');
    if (partes.length === 4) {
      const id = parseInt(partes[0]);
      const precoStr = partes[1];
      const tempoStr = partes[3];

      // Extrair o preço e o tempo como números
      const preco = parseFloat(precoStr.replace('$', '').trim());
      const tempo = parseFloat(tempoStr.trim());

      // Calcular o preço por minuto
      const valorPorMinuto = preco / tempo;

      // Adicionar os dados formatados à matriz com o ID
      dados.push([id, preco, tempo, valorPorMinuto]);
    }
  });

  // Ordenar os dados com base no valor por minuto em ordem crescente
  dados.sort(function (a, b) {
    return a[3].toString().localeCompare(b[3].toString());
  });
  

  // Gere o HTML com os dados ordenados
  const html = gerarHTML(dados);

  // Salvar o HTML em um arquivo chamado "melhores.html"
  fs.writeFileSync('melhores.html', html);

  console.log('Arquivo "melhores.html" gerado com sucesso.');
}

function gerarHTML(dados) {
  // Crie uma string HTML com base nos dados ordenados
  let html = `
    <html>
      <head>
        <title>Dados Ordenados</title>
      </head>
      <body>
        <h1>Dados Ordenados por Melhor Preço por Minuto</h1>
        <table>
          <tr>
            <th>ID</th>
            <th>Preço</th>
            <th>Tempo</th>
            <th>Valor por Minuto</th>
          </tr>`;

  dados.forEach(function (entrada) {
    // Crie um link com o ID no lugar dos zeros na URL
    const link = `https://openloot.com/items/BT0/Hourglass_Common/issue/${entrada[0]}`;

    html += `
          <tr>
            <td><a href="${link}" target="_blank">${entrada[0]}</a></td>
            <td>${entrada[1]}</td>
            <td>${entrada[2]}</td>
            <td>${entrada[3]}</td>
          </tr>`;
  });

  html += `
        </table>
      </body>
    </html>`;

  return html;
}

const dadosStr = `




523079	$ 10.88	Link	0.60
130267	$ 18	Link	0.62
282102	$ 62	Link	0.69
380585	$ 20	Link	0.91
75338	$ 16	Link	1.00
28784	$ 19.70	Link	1.96
174012	$ 16	Link	1.97
482140	$ 16	Link	2.42
100161	$ 16.50	Link	2.42
191148	$ 16	Link	2.74
221583	$ 16	Link	3.42
54038	$ 13	Link	4.00
34319	$ 16.50	Link	4.28
103501	$ 15	Link	4.79
138940	$ 22	Link	4.96
225400	$ 22	Link	4.96
344433	$ 13.10	Link	5.00
20674	$ 30	Link	5.41
112577	$ 25	Link	5.70
10760	$ 32	Link	5.97
355438	$ 15.30	Link	6.84
367942	$ 19.87	Link	6.96
37565	$ 16	Link	8.83
310526	$ 14.50	Link	10
107275	$ 15	Link	10
342554	$ 16	Link	10
153365	$ 20	Link	10
455613	$ 20	Link	10
231190	$ 25	Link	10
312877	$ 30	Link	10
301924	$ 49	Link	10
444306	$ 53	Link	10
449625	$ 53	Link	10
269144	$ 66	Link	10
188068	$ 10,700	Link	10
86062	$ 60	Link	11.30
399760	$ 14	Link	11.81
244368	$ 65	Link	15.98
502174	$ 13.29	Link	16.36
491112	$ 21.30	Link	16.98
23152	$ 16	Link	17.86
570142	$ 25	Link	18.08
245261	$ 53	Link	20
241925	$ 13	Link	24.00
90755	$ 13	Link	25.00
524239	$ 14.90	Link	25.00
462091	$ 19.99	Link	29.00
461333	$ 30	Link	29.77
288390	$ 13	Link	30
10819	$ 15	Link	30
333922	$ 15	Link	30
226086	$ 15	Link	30
23920	$ 16	Link	30
246317	$ 16	Link	30
52305	$ 19.99	Link	30
187686	$ 20	Link	30
305173	$ 21	Link	30
296007	$ 52.70	Link	30
128122	$ 52.70	Link	30
412389	$ 65	Link	31.53
123409	$ 15	Link	32.99
584011	$ 22	Link	34.98
343136	$ 22	Link	39.00
105539	$ 15.80	Link	40
103685	$ 25	Link	40
323010	$ 45	Link	40
322868	$ 22	Link	44.64
167063	$ 53	Link	45.00
477734	$ 18	Link	45.77
540146	$ 23	Link	54.99
312673	$ 20	Link	58.99
572741	$ 15	Link	59.00
345268	$ 20	Link	59.98
215246	$ 14	Link	60
255854	$ 16.50	Link	60
372978	$ 18	Link	60
20146	$ 21	Link	60
6274	$ 25	Link	60
398137	$ 40	Link	60
495848	$ 40	Link	60
11727	$ 49	Link	60
593623	$ 49	Link	60
410305	$ 52.70	Link	60
440878	$ 52.70	Link	60
355880	$ 53	Link	60
250560	$ 80	Link	60
525169	$ 16.50	Link	62.07
165588	$ 14	Link	62.49
476200	$ 15	Link	65.74
132160	$ 16.84	Link	70.00
100716	$ 18	Link	73.75
492811	$ 30	Link	74.76
93696	$ 30	Link	82.00
265772	$ 18	Link	82.78
266525	$ 14.60	Link	83.40
363814	$ 18	Link	87.79
289570	$ 26	Link	89.99
410333	$ 15	Link	90
174590	$ 20	Link	90
370778	$ 20	Link	91.72
127073	$ 12	Link	93.00
101436	$ 12	Link	93.00
192575	$ 12	Link	93.00
309624	$ 12	Link	93.00
440050	$ 36	Link	95.12
580301	$ 58	Link	95.86
332161	$ 16.86	Link	96.00
428186	$ 20	Link	97.10
155420	$ 26	Link	97.89
425081	$ 70	Link	102.00
143726	$ 52.63	Link	102.99
504910	$ 18	Link	103.99
285991	$ 18	Link	104.00
2935	$ 18	Link	104.00
465209	$ 20	Link	106.72
452631	$ 20	Link	107.69
371648	$ 40	Link	109.00
344423	$ 17	Link	109.66
181892	$ 77	Link	109.91
69786	$ 18	Link	110.67
510879	$ 18	Link	111.00
67479	$ 17	Link	111.67
559096	$ 25	Link	113.85
233348	$ 18	Link	120
543748	$ 19	Link	120
451055	$ 19.55	Link	120
110587	$ 19.55	Link	120
382621	$ 19.55	Link	120
251192	$ 19.55	Link	120
8634	$ 19.55	Link	120
424290	$ 19.70	Link	120
569927	$ 19.90	Link	120
398462	$ 19.90	Link	120
396977	$ 19.90	Link	120
538866	$ 19.90	Link	120
118222	$ 20	Link	120
49845	$ 20	Link	120
526876	$ 20.99	Link	120
424099	$ 21	Link	120
132555	$ 21	Link	120
410953	$ 21	Link	120
427031	$ 21	Link	120
541704	$ 21	Link	120
70252	$ 22	Link	120
505431	$ 24.90	Link	120
351825	$ 25	Link	120
501652	$ 25	Link	120
76317	$ 25	Link	120
363666	$ 28	Link	120
449207	$ 28	Link	120
362493	$ 28	Link	120
92344	$ 30	Link	120
87946	$ 30	Link	120
173143	$ 30	Link	120
518608	$ 30	Link	120
101521	$ 30	Link	120
507544	$ 30	Link	120
172910	$ 30	Link	120
383291	$ 30	Link	120
192967	$ 33	Link	120
343594	$ 33	Link	120
30615	$ 36.41	Link	120
69896	$ 36.99	Link	120
168073	$ 38	Link	120
590636	$ 40	Link	120
296307	$ 42	Link	120
131349	$ 49	Link	120
115052	$ 50	Link	120
270630	$ 75	Link	120
14913	$ 102	Link	120
518535	$ 108	Link	120
64350	$ 17.88	Link	120.24
440129	$ 25	Link	120.99
259064	$ 32	Link	121.32
266355	$ 20	Link	122.96
238319	$ 40	Link	123.89
466272	$ 20	Link	124.00
198485	$ 32	Link	124.03
26960	$ 21	Link	129.00
381156	$ 30	Link	129.81
217865	$ 24.99	Link	130
85441	$ 18	Link	130.01
533731	$ 28	Link	143.85
486339	$ 19.19	Link	146.00
73821	$ 20	Link	150
63525	$ 30	Link	150
163018	$ 30	Link	150
423278	$ 42.11	Link	150
77	$ 77	Link	150
129481	$ 34	Link	152.73
356194	$ 120	Link	153.87
456681	$ 31	Link	156.71
356067	$ 33	Link	157.81
41291	$ 24	Link	158.06
213309	$ 10,700	Link	162.59
261722	$ 29	Link	166.88
78884	$ 19.30	Link	174.42
462505	$ 22	Link	180
540474	$ 26	Link	180
222051	$ 36.99	Link	180
322232	$ 21.12	Link	194.41
147921	$ 21	Link	195.00
214538	$ 24	Link	210
382406	$ 30	Link	210
235336	$ 36.99	Link	210
397086	$ 23	Link	210.98
544599	$ 36	Link	212.29
160052	$ 20	Link	217.95
252996	$ 24	Link	219.00
481955	$ 21	Link	220.96
251617	$ 19.99	Link	223.18
246273	$ 19.99	Link	223.44
264456	$ 25	Link	225.81
352369	$ 27	Link	227.95
310178	$ 45	Link	232.75
408843	$ 24	Link	235.20
478840	$ 45	Link	236.75
527439	$ 99	Link	237.00
84274	$ 23	Link	238.16
224377	$ 50	Link	239.66
353615	$ 42	Link	239.82
564037	$ 22	Link	240
143017	$ 45	Link	240
3007	$ 30	Link	244.06
9360	$ 27	Link	244.93
251850	$ 34	Link	246.84
540687	$ 35	Link	255.49
124729	$ 21.90	Link	256.17
496108	$ 30	Link	258.36
549657	$ 22	Link	267.16
582135	$ 36	Link	268.35
251282	$ 19.90	Link	271.27
211563	$ 24	Link	272.84
480866	$ 39	Link	277.95
459730	$ 35	Link	282.62
134818	$ 30	Link	294.76
339133	$ 28	Link	299.2
468334	$ 20	Link	300
20824	$ 22.90	Link	300
16838	$ 45	Link	300
70703	$ 49.90	Link	307.92
268176	$ 27	Link	322.23
435293	$ 22	Link	322.74
364035	$ 35	Link	330.68
381853	$ 50	Link	330.98
507313	$ 60	Link	333.92
216073	$ 34	Link	336.06
476093	$ 25	Link	342.62
345181	$ 22	Link	344.44
455961	$ 25	Link	345.49
595731	$ 30	Link	346.90
384514	$ 35	Link	351.81
208573	$ 34	Link	352.87
313323	$ 35	Link	356.30
92000	$ 35	Link	358.30
510449	$ 28.90	Link	360
514730	$ 50	Link	360
275911	$ 25	Link	365.91
72066	$ 40	Link	366.58
406294	$ 35	Link	366.91
155506	$ 40	Link	373.48
130979	$ 29	Link	375.40
407805	$ 80	Link	389.24
412391	$ 48	Link	390
108707	$ 80	Link	392.17
475991	$ 40	Link	397.06
510469	$ 28	Link	400.8
571466	$ 30	Link	404.11
528853	$ 25	Link	404.95
203978	$ 35	Link	411.26
536160	$ 30	Link	415.29
450127	$ 30	Link	421.03
516413	$ 30	Link	426.76
181702	$ 72	Link	434.36
182233	$ 27	Link	444.41
553797	$ 34	Link	453.39
26522	$ 60	Link	466.17
72978	$ 50	Link	467.00
419283	$ 39	Link	471.09
550742	$ 36	Link	479.87
48940	$ 30	Link	489.49
354739	$ 30	Link	498.55
76558	$ 42	Link	503.83
220849	$ 30	Link	506.69
300438	$ 35	Link	507.85
226739	$ 80	Link	517.63
136758	$ 80	Link	517.63
573747	$ 30	Link	519.96
594199	$ 42	Link	524.06
373635	$ 24.90	Link	534.48
267112	$ 85	Link	539.02
12209	$ 45	Link	540.06
521528	$ 80	Link	542.24
135985	$ 90	Link	542.49
237771	$ 25	Link	550.23
324789	$ 24.90	Link	553.23
411033	$ 24	Link	553.33
110954	$ 31	Link	580.95
66195	$ 31	Link	581.95
57023	$ 32	Link	588.96
287559	$ 60	Link	598.81
303113	$ 69	Link	612.13
429543	$ 45	Link	617.97
395771	$ 40	Link	623.98
460506	$ 50	Link	632.99
345389	$ 50	Link	634.99
312062	$ 50	Link	635.99
74577	$ 50	Link	636.99
405063	$ 55	Link	638.06
19983	$ 40.13	Link	640.98
378419	$ 44	Link	642.46
491685	$ 43	Link	643.82
357693	$ 40	Link	656.94
98871	$ 45	Link	658.00
574475	$ 30.88	Link	663.73
276830	$ 32	Link	666.01
104376	$ 35	Link	670.46
17609	$ 95	Link	673.61
86458	$ 24	Link	678.28
372413	$ 30	Link	680.99
408870	$ 40	Link	681.95
262737	$ 44	Link	696.00
528120	$ 45	Link	698.00
541291	$ 32	Link	698.74
565727	$ 44	Link	709.56
88186	$ 35	Link	712.75
380652	$ 80	Link	713.54
278145	$ 70	Link	715.00
315335	$ 36	Link	720
354331	$ 40	Link	720
451322	$ 40	Link	720
467176	$ 41.50	Link	720
233102	$ 41.50	Link	720
509303	$ 41.50	Link	720
485853	$ 41.50	Link	720
52513	$ 41.50	Link	720
114749	$ 41.50	Link	720
440998	$ 42.19	Link	720
378600	$ 44	Link	720
289808	$ 44	Link	720
401089	$ 44	Link	720
371381	$ 44	Link	720
307497	$ 44	Link	720
265706	$ 44	Link	720
555807	$ 45	Link	720
263445	$ 45	Link	720
77695	$ 45	Link	720
54829	$ 45	Link	720
247037	$ 49.98	Link	720
370357	$ 50	Link	720
281225	$ 50	Link	720
62531	$ 50	Link	720
530830	$ 50	Link	720
328128	$ 50	Link	720
524448	$ 50	Link	720
538726	$ 50	Link	720
432938	$ 51	Link	720
442104	$ 51	Link	720
255652	$ 55	Link	720
57761	$ 59.77	Link	720
526500	$ 59.95	Link	720
214325	$ 60	Link	720
73480	$ 60	Link	720
12098	$ 65	Link	720
329668	$ 65	Link	720
545063	$ 67.50	Link	720
126931	$ 80	Link	720
475604	$ 80	Link	720
149718	$ 100	Link	720
120583	$ 100	Link	720
435868	$ 100	Link	720
429943	$ 100	Link	720
91885	$ 100	Link	720
3187	$ 130	Link	720
115019	$ 99.99	Link	723.40
487716	$ 44.77	Link	730
568203	$ 67	Link	730
44257	$ 100	Link	730
44257	$ 100	Link	730
532904	$ 53	Link	734.67
119645	$ 44	Link	737.57
204820	$ 35	Link	741.88
46924	$ 68	Link	750
47641	$ 100	Link	750
47641	$ 100	Link	750
253143	$ 69.90	Link	756.80
80244	$ 44	Link	758.25
232382	$ 30	Link	759.72
501251	$ 180	Link	764.86
596393	$ 44	Link	765.75
415586	$ 40	Link	801.46
30732	$ 60	Link	808.44
86298	$ 49.80	Link	815.98
411797	$ 51.79	Link	815.98
463754	$ 36.50	Link	831.85
30635	$ 62	Link	837.45
362955	$ 44	Link	847.77
391368	$ 30	Link	849.86
376507	$ 36.50	Link	862.86
260551	$ 45	Link	867.8
395436	$ 38	Link	870.51
398020	$ 40	Link	887.80
398020	$ 40	Link	887.80
470708	$ 49	Link	894.60
298654	$ 34	Link	900
271038	$ 46	Link	900
488833	$ 75	Link	900
27467	$ 75	Link	900
346941	$ 75	Link	900
239073	$ 61.60	Link	909.99
334518	$ 80	Link	920
125650	$ 45	Link	945.67
462164	$ 45	Link	955.68
383564	$ 71	Link	956.78
258123	$ 150	Link	1000.00
39862	$ 74	Link	1020
83010	$ 100	Link	1020
149599	$ 44	Link	1030.45
12140	$ 44	Link	1049
573452	$ 45	Link	1063.76
409695	$ 37	Link	1079.60
569467	$ 52	Link	1080.32
362100	$ 59	Link	1084.00
410236	$ 95	Link	1118.93
62284	$ 80	Link	1122.82
526137	$ 130	Link	1127.05
237398	$ 50	Link	1136.76
434459	$ 50	Link	1151.65
486078	$ 107	Link	1173.61
407350	$ 90	Link	1186.72
488670	$ 90	Link	1186.74
543409	$ 91	Link	1226.50
524161	$ 50	Link	1236.92
558651	$ 80	Link	1237.45
552675	$ 50	Link	1261.65
128940	$ 39	Link	1283.12
560824	$ 55	Link	1312.76
11709	$ 70	Link	1312.93
124289	$ 52	Link	1319.94
182313	$ 110	Link	1320
326702	$ 50	Link	1341.25
509475	$ 39.79	Link	1344.47
332545	$ 40	Link	1348.73
346553	$ 83	Link	1381.28
534822	$ 50	Link	1407.62
121887	$ 43.80	Link	1420.63
66207	$ 52	Link	1434.05
260669	$ 49	Link	1444.37
281184	$ 89	Link	1463.61
446944	$ 50	Link	1485.50
573645	$ 50	Link	1511.96
421779	$ 38.90	Link	1513.64
347503	$ 50	Link	1516.45
447412	$ 150	Link	1537.53
265234	$ 45	Link	1545.93
580529	$ 70	Link	1552.75
103900	$ 118	Link	1556.95
152354	$ 80	Link	1566.95
330592	$ 55	Link	1589.89
402256	$ 52	Link	1613.53
277309	$ 49	Link	1626.40
312294	$ 70	Link	1674.34
249205	$ 79	Link	1675.34
531182	$ 110	Link	1715.03
360116	$ 75	Link	1731.59
62733	$ 50	Link	1771.61
327749	$ 50	Link	1832.56
245238	$ 50	Link	1856.39
478638	$ 50	Link	1865.41
440459	$ 55	Link	1921.48
402151	$ 90	Link	1924.61
432588	$ 95	Link	1954.53
292121	$ 125	Link	1999.89
300388	$ 75	Link	2005.75
431452	$ 110	Link	2029.51
104575	$ 110	Link	2029.88
26559	$ 110	Link	2031.51
84466	$ 110	Link	2031.51
420846	$ 60	Link	2057.57
52621	$ 60	Link	2058.57
254210	$ 60	Link	2080.57
43295	$ 60	Link	2089.33
493869	$ 110	Link	2108.50
45415	$ 130	Link	2142.12
506468	$ 63	Link	2142.77
331193	$ 76.50	Link	2156.45
182911	$ 148	Link	2169.92
74851	$ 70	Link	2180.16
4582	$ 90	Link	2189.89
230417	$ 60	Link	2219.22
409844	$ 59	Link	2237.82
432401	$ 60	Link	2246.51
289238	$ 59	Link	2252.82
547587	$ 105	Link	2253.06
373705	$ 58	Link	2254.82
189301	$ 65	Link	2267.94
473371	$ 100	Link	2280.58
300106	$ 64	Link	2335.49
519102	$ 120	Link	2349.13
13209	$ 60	Link	2443.80
455737	$ 60	Link	2513.51
438981	$ 65	Link	2540.04
213694	$ 60	Link	2544.20
489625	$ 100	Link	2609.92
34370	$ 120	Link	2611.61
118792	$ 100	Link	2617.92
597976	$ 100	Link	2636.93
381171	$ 69	Link	2640.79
103523	$ 90	Link	2656.56
93428	$ 68	Link	2668.80
482041	$ 100	Link	2669.92
340114	$ 100	Link	2692.94
590455	$ 68	Link	2703.72
578560	$ 120	Link	2803.98
332313	$ 125	Link	2803.98
298263	$ 69	Link	2880
459751	$ 77.99	Link	2880
501925	$ 77.99	Link	2880
198813	$ 77.99	Link	2880
185737	$ 77.99	Link	2880
297837	$ 78	Link	2880
532939	$ 78	Link	2880
158242	$ 78.70	Link	2880
257175	$ 78.90	Link	2880
566621	$ 78.93	Link	2880
516025	$ 79.80	Link	2880
512221	$ 79.83	Link	2880
24007	$ 79.93	Link	2880
577898	$ 79.93	Link	2880
421311	$ 110	Link	2880
7278	$ 115	Link	2880
186573	$ 135	Link	2880
265327	$ 140	Link	2880
244253	$ 150	Link	2880
45204	$ 150	Link	2880
417313	$ 2,000	Link	2880
468381	$ 88	Link	2910
270987	$ 100	Link	2930.54
597728	$ 260	Link	2970
412453	$ 75	Link	2977.37
115054	$ 120	Link	2987.37
154362	$ 130	Link	3001.28
224457	$ 105	Link	3035.13
236859	$ 130	Link	3035.30
21021	$ 119.88	Link	3045.61
82261	$ 80	Link	3073.34
492010	$ 135	Link	3200.44
404241	$ 130	Link	3415.96
46469	$ 80	Link	3587.97
269508	$ 79	Link	3600
241931	$ 89.93	Link	3600
396369	$ 93.94	Link	3600
376030	$ 97.40	Link	3600
465591	$ 98.90	Link	3600
532005	$ 99.70	Link	3600
274538	$ 135	Link	3600
40554	$ 138	Link	3732.29
11435	$ 88	Link	4228.90
475733	$ 112	Link	4314.00
410718	$ 145	Link	4320
75551	$ 135	Link	4375.00
107233	$ 126	Link	4483.32
370850	$ 115	Link	4538.77
291662	$ 110	Link	4614.00
340019	$ 200	Link	5487.70
451769	$ 200	Link	5491.70
306891	$ 150	Link	5534.57
542127	$ 135	Link	5760
580050	$ 138.50	Link	5760
408886	$ 235	Link	5764.08
578750	$ 156.78	Link	5932.29
262309	$ 180	Link	5982.01
517919	$ 230	Link	6379.77
302744	$ 230	Link	6383.77
152756	$ 230	Link	6476.81
451607	$ 159.40	Link	7200
476772	$ 186	Link	7200
214157	$ 248	Link	7920
177659	$ 1,000	Link	7920
256707	$ 200	Link	9024.72
153073	$ 170	Link	9108.67
400688	$ 200	Link	9764.95
178163	$ 190	Link	9780.87




`; // Substitua pelos seus próprios dados de exemplo

// Chama a função de ordenação e geração do arquivo HTML
ordenarPorMelhorPrecoPorMinuto(dadosStr);
